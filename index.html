<?php

$arquivo = 'contador.txt';
$links = [
    "https://typebot.co/gabriellaa1", 
            "https://typebot.co/gabriellaa2", 
            "https://typebot.co/gabriellaa3", 
            "https://typebot.co/gabriellaa4", 
            "https://typebot.co/gabriellaa5"
];

$maxVisitas = 200;

// Se o arquivo não existir, cria com valores iniciais
if (!file_exists($arquivo)) {
    file_put_contents($arquivo, "0|0");
}

// Lê o contador e índice atual
list($visitas, $indexAtual) = explode('|', file_get_contents($arquivo));
$visitas = (int) $visitas;
$indexAtual = (int) $indexAtual;

// Incrementa o contador de visitas
$visitas++;
if ($visitas >= $maxVisitas) {
    $indexAtual = ($indexAtual + 1) % count($links);
    $visitas = 0;
}

// Salva o novo valor do contador
file_put_contents($arquivo, "$visitas|$indexAtual");

// Redireciona para o link correto
echo $links[$indexAtual];
